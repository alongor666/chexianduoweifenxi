# Agents 标准化修改记录

## 修改日期: 2025-11-20

## 修改目的
严格按照 `.claude/skills/kpi-calculator/reference.md` 标准，统一所有 agents 中的 KPI 定义、正常范围和术语使用。

---

## 修改内容总览

### 1. insurance-data-analyst.md ✅ 已修改

#### 修改项：
- ✅ **统一术语**: "综合成本率" → "变动成本率"
- ✅ **添加完整的16个核心KPI定义**（4x4网格布局）
- ✅ **添加正常范围**: 每个KPI都标注了标准范围和风险提示
- ✅ **添加快速查表**: 6个常用KPI的速查表

#### 关键变更：

**变更1: KPI正常范围标准化**
```
修改前: 未明确标注正常范围
修改后:
- 满期边际贡献率: 15% - 30%
- 满期赔付率: 60% - 80% ⚠️（之前错误地认为是60-65%）
- 费用率: 15% - 25%
- 变动成本率: 70% - 85%
```

**变更2: 术语统一**
```
修改前: "综合成本率、边际贡献率"
修改后: "变动成本率、满期边际贡献率"（完整术语）
注: 明确标注"综合成本率"为旧称，已废弃
```

**变更3: 新增16个KPI完整定义**
- 第一行：核心比率指标（满期边际贡献率、保费时间进度达成率、满期赔付率、费用率）
- 第二行：核心金额指标（满期边际贡献额、签单保费、已报告赔款、费用额）
- 第三行：结构与效率指标（变动成本率、满期率、满期出险率、保单件数）
- 第四行：单均质量指标（赔案件数、单均保费、案均赔款、单均费用）

---

### 2. test-engineer.md ✅ 已修改

#### 修改项：
- ✅ **重写KPI计算测试**: 基于标准范围编写测试用例
- ✅ **添加边界测试**: 测试正常范围的上下限
- ✅ **添加异常测试**: 测试超出范围的情况
- ✅ **统一术语**: 在注释中明确"综合成本率"已废弃

#### 新增测试函数：
```python
1. test_loss_ratio_calculation()
   - 测试满期赔付率 60%-80% 范围
   - 包含边界值和异常值测试

2. test_margin_contribution_ratio()
   - 测试满期边际贡献率 15%-30% 范围
   - 验证盈利能力判断逻辑

3. test_variable_cost_ratio()
   - 测试变动成本率 70%-85% 范围
   - 明确废弃"综合成本率"旧称
```

---

### 3. 其他 agents 文件 ✅ 无需修改

经验证，以下文件不涉及KPI标准，无需修改：
- ✅ **code-reviewer.md**: 代码审查，不涉及业务KPI
- ✅ **debugger.md**: 问题调试，不涉及业务KPI
- ✅ **plotly-visualization.md**: 可视化工具，不定义业务规则
- ✅ **python-data-engineer.md**: 数据处理工具，已使用标准字段名
- ✅ **README.md**: 使用指南，引用正确
- ✅ **QUICK_START.md**: 快速参考，无KPI定义

---

## 标准来源文档

所有修改严格遵循以下文档：
1. **主要依据**: `.claude/skills/kpi-calculator/reference.md`
   - 16个核心KPI的完整定义
   - 公式、正常范围、业务含义
   - 常见问题排查

2. **补充依据**: `开发文档/03_technical_design/core_calculations.md`
   - 计算引擎定义
   - 4x4网格布局
   - 50周工作制规则

---

## 关键修正点

### ❌ 修正前的错误认知
```
错误1: 满期赔付率正常范围是 60-65%
错误2: 使用"综合成本率"这个非标准术语
错误3: 缺少明确的正常范围标准
错误4: 满期边际贡献率正常范围不明确
```

### ✅ 修正后的标准
```
正确1: 满期赔付率正常范围是 60-80%
正确2: 统一使用"变动成本率"（旧称"综合成本率"已废弃）
正确3: 所有16个KPI都明确标注正常范围
正确4: 满期边际贡献率正常范围是 15-30%（盈利能力核心指标）
```

---

## 影响分析

### 对数据分析的影响
1. **判断标准更准确**:
   - 之前：70%赔付率被误判为"偏高"
   - 现在：70%在60-80%正常范围内，判断为"正常偏高端"

2. **风险识别更精准**:
   - 现在能准确识别边际贡献率6%远低于15-30%标准
   - 变动成本率86.8%轻微超出85%上限

3. **业务建议更科学**:
   - 基于标准范围提供改进建议
   - 优先级排序更合理

### 对测试的影响
1. **测试用例更规范**: 基于标准范围编写边界测试
2. **异常检测更准确**: 能识别超出正常范围的异常值
3. **回归测试更可靠**: 标准化的测试基准

---

## 使用建议

### 1. 数据分析时
参考 `insurance-data-analyst.md` 中的"关键公式速查"表格，快速对比标准范围。

### 2. 编写测试时
参考 `test-engineer.md` 中的 KPI 测试示例，编写基于标准范围的测试用例。

### 3. 避免术语混淆
- ✅ 使用: "变动成本率"
- ❌ 避免: "综合成本率"（已废弃）

### 4. 判断业务风险
**风险优先级**:
1. 🔴 最高: 满期边际贡献率 < 15%（盈利能力核心）
2. 🔴 高: 满期赔付率 > 80%（风险过高）
3. 🟡 中: 变动成本率 > 85%（成本偏高）
4. 🟢 低: 指标在正常范围内

---

## 验证清单

修改完成后验证：
- [x] insurance-data-analyst.md 包含16个KPI完整定义
- [x] 所有KPI标注了正常范围
- [x] "综合成本率"已替换为"变动成本率"
- [x] test-engineer.md 包含基于标准的测试用例
- [x] 其他agents文件无KPI相关内容需修改
- [x] 所有修改引用了标准文档来源

---

## 后续维护

### 如果标准文档更新
1. 首先更新 `.claude/skills/kpi-calculator/reference.md`
2. 然后更新 `insurance-data-analyst.md`
3. 最后更新 `test-engineer.md` 中的测试用例
4. 记录本文档的变更历史

### 版本记录
- **v1.0** (2025-11-20): 初始标准化，统一16个KPI定义和正常范围

---

## 参考链接

- KPI标准定义: `.claude/skills/kpi-calculator/reference.md`
- 计算引擎文档: `开发文档/03_technical_design/core_calculations.md`
- Agent使用指南: `.claude/agents/README.md`
- 快速参考: `.claude/agents/QUICK_START.md`
