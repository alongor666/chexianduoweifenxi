---
description: 重述需求、评估风险、创建分步实施计划。在动手写代码前等待用户确认。
---

# 计划命令 (/plan)

创建全面的实施计划，在编写任何代码之前进行规划。

## 命令用途

1. **重述需求** - 明确需要构建什么
2. **识别风险** - 暴露潜在问题和阻碍
3. **创建步骤计划** - 将实施分解为阶段
4. **等待确认** - 必须获得用户批准才能继续

## 使用场景

当以下情况使用 `/plan`:
- 开始新功能开发
- 进行重大架构变更
- 复杂的重构工作
- 多文件/组件将受影响
- 需求不明确或有歧义

## 工作流程

1. **分析请求** 并用清晰的术语重述需求
2. **分解为阶段** 具体、可操作的步骤
3. **识别依赖** 组件之间的关系
4. **评估风险** 和潜在阻碍
5. **判断复杂度** (高/中/低)
6. **呈现计划** 并等待明确确认

## 输出格式

```markdown
# 实施计划: [功能名称]

## 需求重述
- [要点列表]

## 实施阶段

### 阶段 1: [名称]
- [ ] 任务 1
- [ ] 任务 2

### 阶段 2: [名称]
- [ ] 任务 1

## 依赖项
- [依赖列表]

## 风险评估
- 高: [风险描述]
- 中: [风险描述]

## 复杂度估计: [高/中/低]

**等待确认**: 是否继续此计划? (是/否/修改)
```

## 重要说明

**关键**: 在用户明确确认计划之前，**不会**编写任何代码。

如需变更，请回复:
- "修改: [你的变更]"
- "换个方案: [替代方案]"
- "跳过阶段 X，先做阶段 Y"

## 项目护栏提醒

规划时需遵守 CLAUDE.md 护栏规则:
- 禁改业务口径与数据字典
- 核心目录改动需先登记 BACKLOG
- 状态机: PROPOSED → TRIAGED → IN_PROGRESS → DONE
