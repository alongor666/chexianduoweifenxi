{
  "说明": "字段映射配置文件 - 支持多种数据格式自动转换",
  "版本": "2.1.0",

  "预设映射方案": {

    "保单明细_英文字段": {
      "描述": "保单明细数据（英文字段名，需要聚合）",
      "适用场景": "从业务系统导出的原始保单清单",

      "触发条件": {
        "必须包含字段": [
          "third_level_organization",
          "signed_premium_yuan"
        ]
      },

      "字段映射": {
        "third_level_organization": "机构",
        "customer_category_3": "客户类别",
        "signed_premium_yuan": "签单保费_原始",
        "matured_premium_yuan": "满期保费",
        "reported_claim_payment_yuan": "已报告赔款_原始",
        "expense_amount_yuan": "费用金额",
        "policy_count": "保单件数",
        "claim_case_count": "出险件数"
      },

      "需要聚合": true,

      "聚合配置": {
        "聚合维度": [
          "机构",
          "客户类别"
        ],

        "聚合字段": {
          "签单保费": "签单保费_原始",
          "满期保费": "满期保费",
          "已报告赔款": "已报告赔款_原始",
          "费用金额": "费用金额",
          "保单件数": "保单件数",
          "出险件数": "出险件数"
        },

        "计算指标": {
          "满期赔付率": {
            "公式": "已报告赔款 / 满期保费 * 100",
            "保留小数": 2,
            "异常值处理": "替换为0",
            "说明": "kpi-calculator 公式3"
          },
          "费用率": {
            "公式": "费用金额 / 签单保费 * 100",
            "保留小数": 2,
            "异常值处理": "替换为0",
            "说明": "kpi-calculator 公式4"
          },
          "变动成本率": {
            "公式": "满期赔付率 + 费用率",
            "保留小数": 2,
            "异常值处理": "替换为0",
            "说明": "kpi-calculator 公式9"
          },
          "满期率": {
            "公式": "满期保费 / 签单保费 * 100",
            "保留小数": 2,
            "异常值处理": "替换为0",
            "说明": "kpi-calculator 公式10 - 新增"
          },
          "满期边际贡献率": {
            "公式": "100 - 变动成本率",
            "保留小数": 2,
            "异常值处理": "替换为0",
            "说明": "kpi-calculator 公式1 - 新增"
          },
          "出险率": {
            "公式": "(出险件数 / 保单件数) * 满期率 / 100",
            "保留小数": 2,
            "异常值处理": "替换为0",
            "说明": "kpi-calculator 公式11 - 修改为满期出险率"
          },
          "案均赔款": {
            "公式": "已报告赔款 / 出险件数",
            "保留小数": 2,
            "异常值处理": "替换为0",
            "说明": "kpi-calculator 公式15"
          },
          "单均保费": {
            "公式": "签单保费 / 保单件数",
            "保留小数": 2,
            "异常值处理": "替换为0",
            "说明": "kpi-calculator 公式14 - 新增"
          },
          "单均费用": {
            "公式": "费用金额 / 保单件数",
            "保留小数": 2,
            "异常值处理": "替换为0",
            "说明": "kpi-calculator 公式16 - 新增"
          },
          "满期边际贡献额": {
            "公式": "满期保费 * 满期边际贡献率 / 100",
            "保留小数": 2,
            "异常值处理": "替换为0",
            "说明": "kpi-calculator 公式5 - 新增（单位：元）"
          }
        },

        "输出字段": [
          "机构",
          "客户类别",
          "签单保费",
          "满期保费",
          "已报告赔款",
          "费用金额",
          "满期赔付率",
          "费用率",
          "变动成本率",
          "满期率",
          "满期边际贡献率",
          "出险率",
          "案均赔款",
          "单均保费",
          "单均费用",
          "满期边际贡献额"
        ]
      }
    },

    "汇总数据_中文字段": {
      "描述": "已汇总的KPI数据（标准中文字段名）",
      "适用场景": "预先处理好的汇总数据，直接用于生成报告",

      "触发条件": {
        "必须包含字段": [
          "机构",
          "客户类别",
          "签单保费",
          "满期赔付率"
        ]
      },

      "字段映射": {},
      "需要聚合": false
    }
  },

  "自定义映射示例": {
    "说明": "用户可以添加自己的映射方案",
    "示例_其他系统": {
      "描述": "来自其他系统的数据格式",
      "触发条件": {
        "必须包含字段": ["org_name", "premium"]
      },
      "字段映射": {
        "org_name": "机构",
        "category": "客户类别",
        "premium": "签单保费"
      },
      "需要聚合": false
    }
  },

  "兼容性说明": {
    "向后兼容": "如果数据已经是标准格式（中文字段），将直接使用，无需映射",
    "自动检测": "系统会按顺序尝试所有映射方案，使用第一个匹配的方案",
    "未识别处理": "如果所有方案都不匹配，将提示用户检查数据格式或自定义映射"
  }
}
