# 文档模板库 (Document Templates)

> **作用**: 提供标准化的文档模板,确保文档结构一致和完整

**最后更新**: 2025-12-06
**状态**: ✅ 活跃使用

---

## 📋 模板索引

| 模板类型                          | 文件名规范              | 使用场景                 | 优先级 |
| --------------------------------- | ----------------------- | ------------------------ | ------ |
| [功能文档](#功能文档模板)         | `FXXX_功能名/README.md` | 新增功能或特性           | P0     |
| [技术设计文档](#技术设计文档模板) | `技术主题.md`           | 架构、数据模型、技术选型 | P0     |
| [决策记录](#决策记录模板-adr)     | `ADR-XXX_主题-决策.md`  | 重要技术决策             | P1     |
| [更新历史](#更新历史模板)         | 插入到现有文档末尾      | 文档版本追踪             | P0     |
| [质量报告](#质量报告模板)         | `质量分析报告.md`       | 定期质量审计             | P1     |

---

## 📄 功能文档模板

**文件路径**: `开发文档/01_features/FXXX_功能名称/README.md`

```markdown
# FXXX - 功能名称

> **一句话描述功能的核心价值**

**状态**: 📝 开发中 / ✅ 已完成 / 🗄️ 已归档
**版本**: 1.0
**最后更新**: YYYY-MM-DD
**负责人**: [可选]

---

## 📊 功能概述

### 业务背景

[为什么需要这个功能?解决什么业务问题?]

示例:
```

车险分析师需要快速识别不同地区的业务表现差异,现有的单一维度报表无法满足多维对比需求。
因此需要开发结构分析功能,支持按地区、渠道、产品等维度进行对比分析。

```

### 核心功能

- ✅ **功能点1**: 简要描述
- ✅ **功能点2**: 简要描述
- ⏳ **功能点3**: [开发中]

### 用户故事

```

作为 [角色]
我想要 [目标]
以便 [收益]

```

示例:
```

作为 数据分析师
我想要 按多个维度筛选和对比KPI数据
以便 快速发现业绩差异的根本原因

```

---

## 🛠️ 技术实现

### 架构设计

```

[组件/模块架构图或流程图]

```

示例:
```

UI层: StructureAnalysis.tsx
↓ Props: dimension, metrics
Domain层: compareByDimension()
↓ 调用
Utils层: groupByDimension()

````

### 核心组件

| 组件路径 | 职责 | 依赖 |
|---------|------|------|
| `src/components/features/xxx.tsx` | UI展示和交互 | zustand store |
| `src/domain/services/xxx-service.ts` | 业务逻辑 | types, utils |
| `src/lib/utils/xxx-helper.ts` | 工具函数 | lodash |

### 数据流

```typescript
// 1. 用户触发操作
用户点击筛选按钮
  ↓
// 2. 状态更新
dispatch(setFilter(newFilter))
  ↓
// 3. 数据计算
const result = await calculateKPI(filteredData)
  ↓
// 4. 界面更新
<KPIDashboard data={result} />
````

### 关键代码片段

```typescript
/**
 * 核心函数说明
 * @param param1 - 参数说明
 * @returns 返回值说明
 */
export function keyFunction(param1: Type): ReturnType {
  // 实现逻辑
  return result
}
```

---

## 💡 使用示例

### 基本用法

```tsx
import { FeatureComponent } from '@/components/features/feature-name'

export default function Page() {
  return <FeatureComponent prop1="value1" prop2={data} onEvent={handleEvent} />
}
```

### 高级用法

```typescript
// 自定义配置示例
const customConfig = {
  option1: true,
  option2: 'advanced',
}

const result = await advancedFeature(data, customConfig)
```

---

## ✅ 测试要点

### 单元测试覆盖

- [ ] 核心函数逻辑
- [ ] 边界条件处理
- [ ] 错误处理

### 集成测试场景

| 场景     | 测试数据      | 预期结果     |
| -------- | ------------- | ------------ |
| 正常流程 | 标准CSV文件   | 正确展示KPI  |
| 边界条件 | 空数据集      | 显示友好提示 |
| 异常处理 | 格式错误的CSV | 显示错误信息 |

### 性能要求

- **响应时间**: < 200ms (常规操作)
- **数据量支持**: 最多10万行CSV
- **内存占用**: < 100MB

---

## 📚 相关文档

- [数据架构](../../03_technical_design/data_architecture.md)
- [核心计算](../../03_technical_design/core_calculations.md)
- [ADR-XXX: 相关决策](../../02_decisions/ADR-XXX_主题.md)

---

## 📝 更新历史

### YYYY-MM-DD (V1.0)

- **新增**: 功能初始实现
- **技术栈**: React 18, TypeScript, Zustand
- **测试**: 单元测试覆盖率 85%

---

_功能编号: FXXX_
_对应代码: src/components/features/xxx.tsx_

````

---

## 📐 技术设计文档模板

**文件路径**: `开发文档/03_technical_design/主题名称.md`

```markdown
# 技术主题名称

> **技术主题的核心定位**

## 版本信息
- **版本**: 1.0
- **最后更新**: YYYY-MM-DD
- **状态**: ✅ 现行标准 / 📝 草稿 / ⚠️ 建议归档

---

## 🎯 设计目标

[为什么需要这个技术设计?解决什么技术问题?]

**核心目标**:
1. 目标1
2. 目标2
3. 目标3

---

## 📊 整体架构

### 架构图

````

[ASCII艺术图或流程图]

```

示例:
```

┌─────────────────────────────────────────┐
│ 应用层 (Application Layer) │
├─────────────────────────────────────────┤
│ 领域层 (Domain Layer) │
├─────────────────────────────────────────┤
│ 基础设施层 (Infrastructure Layer) │
└─────────────────────────────────────────┘

````

### 关键组件

| 组件名称 | 职责 | 技术选型 |
|---------|------|---------|
| 组件A | 职责描述 | 技术栈 |
| 组件B | 职责描述 | 技术栈 |

---

## 🔧 技术细节

### 核心概念

#### 概念1: 名称

**定义**: [概念的准确定义]

**示例**:
```typescript
// 代码示例
````

**应用场景**:

- 场景1
- 场景2

---

### 数据模型

```typescript
/**
 * 核心数据结构
 */
interface CoreModel {
  field1: Type1 // 字段说明
  field2: Type2 // 字段说明
}
```

### API接口

#### 接口1: 接口名称

**端点**: `POST /api/endpoint`

**请求格式**:

```json
{
  "param1": "value1",
  "param2": 123
}
```

**响应格式**:

```json
{
  "result": "success",
  "data": {}
}
```

---

## 📈 性能考量

| 指标     | 目标值  | 当前值  | 优化方向 |
| -------- | ------- | ------- | -------- |
| 响应时间 | < 100ms | 80ms    | ✅ 达标  |
| 内存占用 | < 50MB  | 45MB    | ✅ 达标  |
| 并发支持 | 100 QPS | 120 QPS | ✅ 超标  |

---

## 🔒 安全性

- [ ] 输入验证: [措施]
- [ ] 权限控制: [措施]
- [ ] 数据加密: [措施]

---

## 📚 参考资料

- [官方文档](https://example.com)
- [技术博客](https://blog.example.com)
- [相关ADR](../02_decisions/ADR-XXX.md)

---

## 📝 更新历史

### YYYY-MM-DD (V1.0)

- **新增**: 初始版本
- **变更**: 无
- **影响**: 全项目

---

_状态: ✅ 现行标准_
_维护者: [姓名]_

````

---

## 📋 决策记录模板 (ADR)

**文件路径**: `开发文档/02_decisions/ADR-XXX_主题-决策.md`

```markdown
# ADR-XXX: 决策主题

**状态**: 📝 提议中 / ✅ 已采纳 / ❌ 已拒绝 / ⚠️ 已废弃
**日期**: YYYY-MM-DD
**决策者**: [姓名/团队]
**影响范围**: [项目/模块]

---

## 🎯 背景与问题陈述

### 业务背景

[描述业务场景和需求]

### 技术挑战

[描述需要解决的技术问题]

### 约束条件

- 约束1: [技术/资源/时间限制]
- 约束2: [...]

---

## 🤔 考虑的方案

### 方案A: [方案名称]

**描述**: [方案的核心思路]

**优点**:
- ✅ 优点1
- ✅ 优点2

**缺点**:
- ❌ 缺点1
- ❌ 缺点2

**技术示例**:
```typescript
// 代码示例
````

**成本评估**:

- 开发成本: [工时]
- 学习成本: [难度]
- 维护成本: [长期]

---

### 方案B: [方案名称]

[同上结构]

---

### 方案C: [方案名称]

[同上结构]

---

## ✅ 决策结果

**选择**: 方案B

**理由**:

1. 理由1: [详细说明]
2. 理由2: [详细说明]
3. 理由3: [详细说明]

**权衡**:

- 舍弃了方案A的 [优点],但获得了 [更大的收益]
- 接受了方案B的 [缺点],因为 [可接受的原因]

---

## 📊 实施计划

### 阶段1: 准备阶段

- [ ] 任务1
- [ ] 任务2

### 阶段2: 实施阶段

- [ ] 任务3
- [ ] 任务4

### 阶段3: 验证阶段

- [ ] 测试1
- [ ] 测试2

---

## 🔮 预期后果

### 正面影响

- ✅ 影响1
- ✅ 影响2

### 负面影响

- ⚠️ 影响1: [缓解措施]
- ⚠️ 影响2: [缓解措施]

### 风险管理

| 风险  | 概率 | 影响 | 缓解方案 |
| ----- | ---- | ---- | -------- |
| 风险1 | 中   | 高   | [方案]   |
| 风险2 | 低   | 中   | [方案]   |

---

## 📚 相关资料

- [技术文档](../03_technical_design/xxx.md)
- [官方文档](https://example.com)
- [讨论记录](链接)

---

## 📝 决策历史

### YYYY-MM-DD

- **状态变更**: 提议中 → 已采纳
- **原因**: [说明]

---

_决策编号: ADR-XXX_
_下次审查: YYYY-MM-DD_

````

---

## 📝 更新历史模板

**插入位置**: 文档末尾,在最后一个分隔线之前

```markdown
## 📝 更新历史

### YYYY-MM-DD (V3.0)
- **重大变更**: [BREAKING CHANGE描述]
- **新增**: [新增内容列表]
- **修正**: [修正内容列表]
- **优化**: [优化内容列表]
- **验证**: [验证结果]

### YYYY-MM-DD (V2.0)
- **新增**: [内容]
- **优化**: [内容]

### YYYY-MM-DD (V1.0)
- **新增**: 文档初始版本
- **技术栈**: [使用的技术]
- **状态**: ✅ 已完成
````

**版本号规则**:

```
主版本号.次版本号

- 主版本号: BREAKING CHANGE (破坏性变更)
- 次版本号: 新增功能或重要修正 (向后兼容)

示例:
1.0 → 2.0: 数据结构变更 (破坏性)
2.0 → 2.1: 新增计算公式 (兼容)
```

---

## 📊 质量报告模板

**文件路径**: `开发文档/质量分析报告_YYYYMMDD.md`

```markdown
# 文档代码一致性分析报告

**生成时间**: YYYY-MM-DD HH:mm
**分析范围**: [全项目 / 特定模块]
**分析工具**: Claude Code + doc-syncer skill

---

## 📊 总体评分

**一致性得分**: XX/100

| 维度           | 得分   | 权重 | 加权得分   | 状态  |
| -------------- | ------ | ---- | ---------- | ----- |
| 数据架构一致性 | XX/100 | 25%  | XX         | ✅/⚠️ |
| 核心计算一致性 | XX/100 | 20%  | XX         | ✅/⚠️ |
| 技术栈一致性   | XX/100 | 15%  | XX         | ✅/⚠️ |
| 功能文档一致性 | XX/100 | 15%  | XX         | ✅/⚠️ |
| API文档一致性  | XX/100 | 15%  | XX         | ✅/⚠️ |
| 链接完整性     | XX/100 | 10%  | XX         | ✅/⚠️ |
| **总分**       | -      | -    | **XX/100** | ✅    |

**评级**: 优秀 ✅ / 良好 📝 / 及格 ⚠️ / 不及格 ❌

---

## 🔍 详细发现

### 维度1: [维度名称]

**得分**: XX/100

**检查项**:
| 检查项 | 期望 | 实际 | 状态 |
|-------|------|------|------|
| 项目1 | 期望值 | 实际值 | ✅/❌ |
| 项目2 | 期望值 | 实际值 | ✅/❌ |

**发现的问题**:

1. ❌ **问题描述**
   - **位置**: 文件路径:行号
   - **影响**: 影响范围
   - **建议**: 修复建议

2. ⚠️ **问题描述**
   - **位置**: 文件路径:行号
   - **影响**: 影响范围
   - **建议**: 修复建议

---

[重复上述结构,覆盖所有维度]

---

## 🛠️ 修复计划

### P0 - 必须立即修复 (影响核心功能)

- [ ] **问题1**: [描述]
  - **预计工时**: X小时
  - **影响范围**: [范围]
  - **修复方案**: [方案]

### P1 - 建议本周修复 (影响用户体验)

- [ ] **问题2**: [描述]
  - **预计工时**: X小时
  - **影响范围**: [范围]
  - **修复方案**: [方案]

### P2 - 可选优化 (改进建议)

- [ ] **问题3**: [描述]
  - **预计工时**: X小时
  - **影响范围**: [范围]
  - **修复方案**: [方案]

---

## 📈 趋势分析

**与上次报告对比** (YYYY-MM-DD):

- 一致性得分: XX/100 → XX/100 (↑/↓ X分)
- 问题总数: XX → XX (↓ X个)
- 修复完成率: XX%

**改进建议**:

1. 建议1
2. 建议2
3. 建议3

---

## 📚 附录

### 检查方法

[说明使用的检查工具和方法]

### 数据来源

- 代码分析: [工具/方法]
- 文档分析: [工具/方法]
- 对比方式: [说明]

---

_自动生成 by doc-syncer skill_
_下次检查: YYYY-MM-DD_
```

---

## 🎨 Markdown格式规范

### 标题层级

```markdown
# 一级标题 (文档标题,每个文件只有1个)

## 二级标题 (主要章节)

### 三级标题 (子章节)

#### 四级标题 (细节说明)
```

### 代码块

````markdown
```typescript
// 必须标注语言
const example: string = '示例'
```
````

### 表格

```markdown
| 列1   | 列2   | 列3   |
| ----- | ----- | ----- |
| 内容1 | 内容2 | 内容3 |
```

### 链接

```markdown
相对路径: [文本](../path/to/file.md)
锚点链接: [文本](#章节标题)
外部链接: [文本](https://example.com)
```

### 列表

```markdown
无序列表:

- 项目1
- 项目2
  - 子项目2.1

有序列表:

1. 步骤1
2. 步骤2
   - 注意事项
```

### 强调

```markdown
**粗体** (重要内容)
_斜体_ (次要强调)
`代码` (内联代码)
```

---

## 📋 使用指南

### 如何选择模板

1. **新增功能** → 使用功能文档模板
2. **技术决策** → 使用ADR模板
3. **架构设计** → 使用技术设计文档模板
4. **版本更新** → 使用更新历史模板
5. **质量检查** → 使用质量报告模板

### 模板定制

1. **保留**: ✅ 标题结构、必需章节、版本信息
2. **可选**: 根据实际需求增删具体章节
3. **禁止**: ❌ 修改文档ID规范、破坏链接结构

### 质量检查

使用模板创建文档后,运行以下检查:

- [ ] 所有必需章节已填写
- [ ] 版本号和日期已更新
- [ ] 代码示例可运行
- [ ] 内部链接有效
- [ ] 术语使用一致

---

_模板库版本: 2.0_
_最后更新: 2025-12-06_
_维护: doc-syncer skill_
