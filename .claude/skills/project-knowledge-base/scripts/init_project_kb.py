#!/usr/bin/env python3
"""
é¡¹ç›®çŸ¥è¯†åº“åˆå§‹åŒ–è„šæœ¬
è‡ªåŠ¨åˆ›å»ºæ ‡å‡†ç›®å½•ç»“æ„å¹¶ç”Ÿæˆé¡¹ç›®å¯åŠ¨å’ŒæŠ€æœ¯æ–¹æ¡ˆæ¨¡æ¿
"""

import os
import sys
import shutil
from pathlib import Path
from datetime import datetime

def create_directory_structure(base_path: str) -> dict:
    """
    åˆ›å»ºæ ‡å‡†çŸ¥è¯†åº“ç›®å½•ç»“æ„
    
    Args:
        base_path: çŸ¥è¯†åº“æ ¹ç›®å½•è·¯å¾„
        
    Returns:
        dict: åˆ›å»ºçš„ç›®å½•è·¯å¾„æ˜ å°„
    """
    dirs = {
        'root': base_path,
        'docs': os.path.join(base_path, 'docs'),
        'decisions': os.path.join(base_path, 'decisions'),
        'patterns': os.path.join(base_path, 'patterns'),
        'patterns_code': os.path.join(base_path, 'patterns', 'code'),
        'patterns_config': os.path.join(base_path, 'patterns', 'configs'),
        'reports': os.path.join(base_path, 'reports'),
    }
    
    # åˆ›å»ºæ‰€æœ‰ç›®å½•
    for dir_path in dirs.values():
        os.makedirs(dir_path, exist_ok=True)
        # åˆ›å»º .gitkeep ä¿æŒç©ºç›®å½•
        gitkeep = os.path.join(dir_path, '.gitkeep')
        if not os.path.exists(gitkeep):
            Path(gitkeep).touch()
    
    return dirs

def generate_project_charter_template(output_path: str, project_name: str = "æ–°é¡¹ç›®") -> str:
    """ç”Ÿæˆé¡¹ç›®å¯åŠ¨æ–‡æ¡£æ¨¡æ¿ï¼ˆåå®‰è½¦é™©ä¸šåŠ¡å®šåˆ¶ï¼‰"""
    
    template = f'''---
é¡¹ç›®åç§°: {project_name}
æ–‡æ¡£ç±»å‹: é¡¹ç›®å¯åŠ¨æ–‡æ¡£
åˆ›å»ºæ—¥æœŸ: {datetime.now().strftime("%Y-%m-%d")}
æ›´æ–°æ—¥æœŸ: {datetime.now().strftime("%Y-%m-%d")}
è´Ÿè´£äºº: å¾…å¡«å†™
çŠ¶æ€: è‰ç¨¿
æ ‡ç­¾: [é¡¹ç›®å¯åŠ¨, è½¦é™©ä¸šåŠ¡]
---

# {project_name} - é¡¹ç›®å¯åŠ¨æ–‡æ¡£

## ä¸€ã€é¡¹ç›®èƒŒæ™¯ä¸ç›®æ ‡

### 1.1 ä¸šåŠ¡èƒŒæ™¯
<!-- æè¿°é¡¹ç›®çš„ä¸šåŠ¡èƒŒæ™¯ï¼Œä¾‹å¦‚ï¼š
- åå®‰ä¿é™©å››å·åˆ†å…¬å¸éœ€è¦æ¯å‘¨ç”Ÿæˆè½¦é™©ç»è¥åˆ†ææŠ¥å‘Š
- ç›®å‰æ‰‹å·¥åˆ¶ä½œPPTè€—æ—¶3-4å°æ—¶ï¼Œéœ€è¦è‡ªåŠ¨åŒ–
- æ€»éƒ¨è¦æ±‚é‡‡ç”¨éº¦è‚¯é”¡é£æ ¼çš„é—®é¢˜å¯¼å‘å‹æŠ¥å‘Š
-->

**èƒŒæ™¯æè¿°**ï¼š

**ä¸šåŠ¡ç—›ç‚¹**ï¼š
- ç—›ç‚¹1ï¼š
- ç—›ç‚¹2ï¼š
- ç—›ç‚¹3ï¼š

### 1.2 é¡¹ç›®ç›®æ ‡
<!-- å®šä¹‰æ¸…æ™°çš„ã€å¯è¡¡é‡çš„ç›®æ ‡ -->

**æ ¸å¿ƒç›®æ ‡**ï¼š

**å…³é”®æŒ‡æ ‡ï¼ˆKPIï¼‰**ï¼š
| æŒ‡æ ‡åç§° | å½“å‰å€¼ | ç›®æ ‡å€¼ | è¡¡é‡æ–¹å¼ |
|---------|-------|-------|---------|
| æŠ¥å‘Šç”Ÿæˆæ—¶é—´ | 3-4å°æ—¶ | <5åˆ†é’Ÿ | è‡ªåŠ¨åŒ–è„šæœ¬è¿è¡Œæ—¶é—´ |
| ä¿è´¹æ•°æ®å‡†ç¡®ç‡ | 95% | 99.5% | ä¸æºæ•°æ®å¯¹æ¯” |
| èµ”ä»˜ç‡è®¡ç®—è¯¯å·® | Â±2% | Â±0.1% | ä¸è´¢åŠ¡ç³»ç»Ÿå¯¹è´¦ |

## äºŒã€é¡¹ç›®èŒƒå›´

### 2.1 åŒ…å«èŒƒå›´
<!-- æ˜ç¡®é¡¹ç›®è¦åšä»€ä¹ˆ -->

**åŠŸèƒ½èŒƒå›´**ï¼š
- [ ] åŠŸèƒ½1ï¼š
- [ ] åŠŸèƒ½2ï¼š
- [ ] åŠŸèƒ½3ï¼š

**æ•°æ®èŒƒå›´**ï¼ˆè½¦é™©ä¸šåŠ¡ï¼‰ï¼š
- [ ] ç­¾å•ä¿è´¹æ•°æ®
- [ ] æ»¡æœŸèµ”ä»˜ç‡æ•°æ®
- [ ] å˜åŠ¨æˆæœ¬ç‡æ•°æ®
- [ ] è´¹ç”¨ç‡æ•°æ®
- [ ] æœºæ„ç»´åº¦æ•°æ®ï¼ˆä¸‰çº§æœºæ„ï¼‰
- [ ] å®¢æˆ·ç±»åˆ«ç»´åº¦æ•°æ®ï¼ˆå®¶ç”¨è½¦ã€è´§è½¦ç­‰ï¼‰

**åˆ†æç»´åº¦**ï¼š
- [ ] åˆ†æœºæ„åˆ†æ
- [ ] åˆ†å®¢æˆ·ç±»åˆ«åˆ†æ
- [ ] å‘¨åº¦è¶‹åŠ¿åˆ†æï¼ˆå¯é€‰ï¼‰

### 2.2 ä¸åŒ…å«èŒƒå›´
<!-- æ˜ç¡®é¡¹ç›®ä¸åšä»€ä¹ˆï¼Œé¿å…èŒƒå›´è”“å»¶ -->

**æ˜ç¡®æ’é™¤**ï¼š
- ä¸åŒ…å«1ï¼š
- ä¸åŒ…å«2ï¼š

## ä¸‰ã€å¹²ç³»äººä¸è§’è‰²

### 3.1 æ ¸å¿ƒå›¢é˜Ÿ

| è§’è‰² | å§“å | èŒè´£ | å·¥ä½œé‡å æ¯” |
|-----|------|------|----------|
| é¡¹ç›®è´Ÿè´£äºº | å¾…å®š | æ•´ä½“åè°ƒã€å†³ç­– | 20% |
| æŠ€æœ¯å¼€å‘ | å¾…å®š | ä»£ç å®ç°ã€æµ‹è¯• | 80% |
| ä¸šåŠ¡ä¸“å®¶ | å¾…å®š | éœ€æ±‚æ¾„æ¸…ã€éªŒæ”¶ | 30% |

### 3.2 å¹²ç³»äººåˆ†æ

| å¹²ç³»äºº | åˆ©ç›Šè¯‰æ±‚ | å½±å“åŠ› | æ²Ÿé€šç­–ç•¥ |
|-------|---------|-------|---------|
| åˆ†å…¬å¸æ€»ç»ç† | å¿«é€Ÿå†³ç­–æ”¯æŒ | é«˜ | å‘¨åº¦æ±‡æŠ¥ |
| ä¸šåŠ¡éƒ¨é—¨ä¸»ç®¡ | å‡†ç¡®çš„æ•°æ®åˆ†æ | ä¸­ | éœ€æ±‚ç¡®è®¤ä¼š |
| ITéƒ¨é—¨ | ç³»ç»Ÿç¨³å®šæ€§ | ä¸­ | æŠ€æœ¯è¯„å®¡ |

## å››ã€å…³é”®é‡Œç¨‹ç¢‘ä¸æ—¶é—´è¡¨

### 4.1 é‡Œç¨‹ç¢‘è§„åˆ’

| é‡Œç¨‹ç¢‘ | äº¤ä»˜ç‰© | ç›®æ ‡æ—¥æœŸ | è´£ä»»äºº | çŠ¶æ€ |
|-------|-------|---------|-------|------|
| M1: éœ€æ±‚ç¡®è®¤ | éœ€æ±‚æ–‡æ¡£v1.0 | Week 1 | å¾…å®š | æœªå¼€å§‹ |
| M2: æŠ€æœ¯æ–¹æ¡ˆè¯„å®¡ | æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£ | Week 2 | å¾…å®š | æœªå¼€å§‹ |
| M3: MVPå¼€å‘å®Œæˆ | å¯è¿è¡Œçš„åŸå‹ | Week 4 | å¾…å®š | æœªå¼€å§‹ |
| M4: æµ‹è¯•ä¸ä¼˜åŒ– | æµ‹è¯•æŠ¥å‘Š | Week 6 | å¾…å®š | æœªå¼€å§‹ |
| M5: æ­£å¼ä¸Šçº¿ | ç”Ÿäº§ç¯å¢ƒéƒ¨ç½² | Week 8 | å¾…å®š | æœªå¼€å§‹ |

### 4.2 è¯¦ç»†æ—¶é—´è¡¨

**ç¬¬1-2å‘¨ï¼šéœ€æ±‚ä¸è®¾è®¡**
- [ ] éœ€æ±‚è°ƒç ”ä¸ç¡®è®¤
- [ ] æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡
- [ ] æ•°æ®å­—æ®µæ¢³ç†

**ç¬¬3-4å‘¨ï¼šå¼€å‘ä¸æµ‹è¯•**
- [ ] æ ¸å¿ƒåŠŸèƒ½å¼€å‘
- [ ] å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•

**ç¬¬5-6å‘¨ï¼šä¼˜åŒ–ä¸éƒ¨ç½²**
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] ç”¨æˆ·åŸ¹è®­
- [ ] ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

## äº”ã€é£é™©ä¸åº”å¯¹

### 5.1 é£é™©è¯†åˆ«

| é£é™©ç±»å‹ | é£é™©æè¿° | æ¦‚ç‡ | å½±å“ | åº”å¯¹ç­–ç•¥ |
|---------|---------|------|------|---------|
| æŠ€æœ¯é£é™© | Python-pptxæ€§èƒ½ä¸è¶³ | ä¸­ | é«˜ | æå‰æ€§èƒ½æµ‹è¯•ï¼Œå‡†å¤‡æ›¿ä»£æ–¹æ¡ˆ |
| æ•°æ®é£é™© | æºæ•°æ®è´¨é‡ä¸ç¨³å®š | é«˜ | ä¸­ | å¢åŠ æ•°æ®æ ¡éªŒé€»è¾‘ |
| ä¸šåŠ¡é£é™© | éœ€æ±‚é¢‘ç¹å˜æ›´ | ä¸­ | ä¸­ | é‡‡ç”¨MVPè¿­ä»£æ¨¡å¼ |

### 5.2 ä¾èµ–é¡¹ç®¡ç†

**å¤–éƒ¨ä¾èµ–**ï¼š
- [ ] è´¢åŠ¡ç³»ç»Ÿæä¾›ç¨³å®šçš„æ•°æ®æ¥å£
- [ ] ITéƒ¨é—¨æä¾›å¼€å‘ç¯å¢ƒ
- [ ] ä¸šåŠ¡éƒ¨é—¨é…åˆæµ‹è¯•éªŒè¯

**å†…éƒ¨ä¾èµ–**ï¼š
- [ ] Python 3.8+ ç¯å¢ƒ
- [ ] python-pptx, pandas ç­‰åº“

## å…­ã€æˆåŠŸæ ‡å‡†

### 6.1 åŠŸèƒ½éªŒæ”¶æ ‡å‡†
- [ ] èƒ½å¤Ÿå¤„ç†Excel/CSV/JSON/DuckDBæ ¼å¼çš„è½¦é™©æ•°æ®
- [ ] è‡ªåŠ¨ç”Ÿæˆ12-13é¡µéº¦è‚¯é”¡é£æ ¼PPTæŠ¥å‘Š
- [ ] é—®é¢˜å¯¼å‘æ ‡é¢˜å‡†ç¡®ç‡ > 90%
- [ ] å›¾è¡¨ç”Ÿæˆç¬¦åˆå››è±¡é™/æ°”æ³¡å›¾è§„èŒƒ

### 6.2 æ€§èƒ½éªŒæ”¶æ ‡å‡†
- [ ] å•å‘¨æ•°æ®å¤„ç†æ—¶é—´ < 5åˆ†é’Ÿ
- [ ] æ”¯æŒè‡³å°‘10ä¸ªä¸‰çº§æœºæ„çš„æ•°æ®
- [ ] PPTæ–‡ä»¶å¤§å° < 5MB

### 6.3 è´¨é‡éªŒæ”¶æ ‡å‡†
- [ ] ä»£ç æµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] æ— P0/P1çº§bug
- [ ] ç”¨æˆ·æ»¡æ„åº¦ > 4.0/5.0

## ä¸ƒã€èµ„æºéœ€æ±‚

### 7.1 äººåŠ›èµ„æº
- æŠ€æœ¯å¼€å‘ï¼š1äºº Ã— 8å‘¨
- ä¸šåŠ¡æ”¯æŒï¼š0.5äºº Ã— 4å‘¨

### 7.2 æŠ€æœ¯èµ„æº
- å¼€å‘ç¯å¢ƒï¼šæœ¬åœ° + Linuxè™šæ‹Ÿæœº
- ä¾èµ–åº“ï¼šå¼€æºå…è´¹
- å­˜å‚¨ç©ºé—´ï¼š< 1GB

## å…«ã€æ²Ÿé€šè®¡åˆ’

| ä¼šè®®ç±»å‹ | é¢‘ç‡ | å‚ä¸äºº | ç›®çš„ |
|---------|------|-------|------|
| æ¯æ—¥ç«™ä¼š | æ¯æ—¥ | å¼€å‘å›¢é˜Ÿ | åŒæ­¥è¿›åº¦ä¸é—®é¢˜ |
| å‘¨åº¦å›é¡¾ | æ¯å‘¨ | æ ¸å¿ƒå›¢é˜Ÿ+å¹²ç³»äºº | é‡Œç¨‹ç¢‘æ£€æŸ¥ |
| éœ€æ±‚æ¾„æ¸…ä¼š | æŒ‰éœ€ | å¼€å‘+ä¸šåŠ¡ä¸“å®¶ | éœ€æ±‚ç¡®è®¤ |

---

**æ–‡æ¡£ç»´æŠ¤è¯´æ˜**ï¼š
- æœ¬æ–‡æ¡£ä¸ºæ´»æ–‡æ¡£ï¼Œéšé¡¹ç›®æ¨è¿›æŒç»­æ›´æ–°
- é‡å¤§å˜æ›´éœ€ç»é¡¹ç›®è´Ÿè´£äººå®¡æ‰¹
- æ›´æ–°é¢‘ç‡ï¼šæ¯å‘¨æˆ–é‡å¤§é‡Œç¨‹ç¢‘å
'''
    
    with open(output_path, 'w', encoding='utf-8') as f:
        f.write(template)
    
    return output_path

def generate_tech_design_template(output_path: str, project_name: str = "æ–°é¡¹ç›®") -> str:
    """ç”ŸæˆæŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£æ¨¡æ¿ï¼ˆåå®‰è½¦é™©ä¸šåŠ¡å®šåˆ¶ï¼‰"""
    
    template = f'''---
é¡¹ç›®åç§°: {project_name}
æ–‡æ¡£ç±»å‹: æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£
åˆ›å»ºæ—¥æœŸ: {datetime.now().strftime("%Y-%m-%d")}
æ›´æ–°æ—¥æœŸ: {datetime.now().strftime("%Y-%m-%d")}
æŠ€æœ¯è´Ÿè´£äºº: å¾…å¡«å†™
è¯„å®¡çŠ¶æ€: å¾…è¯„å®¡
æ ‡ç­¾: [æŠ€æœ¯æ–¹æ¡ˆ, æ¶æ„è®¾è®¡, è½¦é™©ä¸šåŠ¡]
---

# {project_name} - æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£

## ä¸€ã€æŠ€æœ¯é€‰å‹

### 1.1 ç¼–ç¨‹è¯­è¨€ä¸æ¡†æ¶

**é€‰æ‹©**: Python 3.8+

**ç†ç”±**:
- æ•°æ®å¤„ç†ç”Ÿæ€æˆç†Ÿï¼ˆpandas, numpyï¼‰
- PPTç”Ÿæˆåº“python-pptxåŠŸèƒ½å®Œå–„
- å›¢é˜ŸæŠ€æœ¯æ ˆåŒ¹é…

**æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”**:
| æ–¹æ¡ˆ | ä¼˜åŠ¿ | åŠ£åŠ¿ | å†³ç­– |
|-----|------|------|------|
| Python + python-pptx | ç”Ÿæ€æˆç†Ÿã€å¼€å‘æ•ˆç‡é«˜ | æ€§èƒ½ç›¸å¯¹è¾ƒä½ | âœ… é‡‡ç”¨ |
| Node.js + pptxgenjs | æ€§èƒ½è¾ƒå¥½ | å›¢é˜Ÿä¸ç†Ÿæ‚‰ | âŒ ä¸é‡‡ç”¨ |
| Java + Apache POI | æ€§èƒ½æœ€ä½³ | å¼€å‘æ•ˆç‡ä½ | âŒ ä¸é‡‡ç”¨ |

### 1.2 æ ¸å¿ƒä¾èµ–åº“

| åº“åç§° | ç‰ˆæœ¬ | ç”¨é€” | å¿…éœ€æ€§ |
|-------|------|------|-------|
| pandas | â‰¥1.5.0 | æ•°æ®å¤„ç† | å¿…éœ€ |
| python-pptx | â‰¥0.6.21 | PPTç”Ÿæˆ | å¿…éœ€ |
| matplotlib | â‰¥3.5.0 | å›¾è¡¨å¯è§†åŒ– | å¿…éœ€ |
| openpyxl | â‰¥3.0.0 | Excelè¯»å– | å¿…éœ€ |
| duckdb | â‰¥0.9.0 | æ•°æ®åº“æ”¯æŒ | å¯é€‰ |

### 1.3 æ•°æ®å­˜å‚¨æ–¹æ¡ˆ

**æ–¹æ¡ˆé€‰æ‹©**: æ–‡ä»¶ç³»ç»Ÿï¼ˆExcel/CSV/JSONï¼‰+ å¯é€‰DuckDB

**ç†ç”±**:
- ç¬¦åˆç°æœ‰ä¸šåŠ¡æµç¨‹ï¼ˆå‘¨æŠ¥æ•°æ®æ¥è‡ªExcelå¯¼å‡ºï¼‰
- æ— éœ€é¢å¤–æ•°æ®åº“è¿ç»´
- DuckDBä½œä¸ºå¯é€‰å¢å¼ºï¼Œæ”¯æŒå¤§æ•°æ®é‡åœºæ™¯

## äºŒã€ç³»ç»Ÿæ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·å±‚                              â”‚
â”‚  - Claude.ai äº¤äº’ç•Œé¢                                    â”‚
â”‚  - ä¸Šä¼ æ•°æ®æ–‡ä»¶ï¼ˆExcel/CSV/JSON/DuckDBï¼‰                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Skill è°ƒåº¦å±‚                          â”‚
â”‚  - project-knowledge-base Skill                         â”‚
â”‚  - è·¯ç”±åˆ°å¯¹åº”è„šæœ¬                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ ¸å¿ƒå¤„ç†å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚æ•°æ®åŠ è½½æ¨¡å— â”‚â†’ â”‚ä¸šåŠ¡åˆ†ææ¨¡å—  â”‚â†’ â”‚æŠ¥å‘Šç”Ÿæˆæ¨¡å—   â”‚  â”‚
â”‚  â”‚DataLoader  â”‚  â”‚Analyzer      â”‚  â”‚ReportBuilder  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é…ç½®ç®¡ç†å±‚                            â”‚
â”‚  - thresholds.json (é˜ˆå€¼é…ç½®)                           â”‚
â”‚  - plans.json (ä¿è´¹è®¡åˆ’ï¼Œå¯é€‰)                          â”‚
â”‚  - insurance-domain.md (é¢†åŸŸçŸ¥è¯†)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¾“å‡ºå±‚                                â”‚
â”‚  - ç”Ÿæˆ12-13é¡µéº¦è‚¯é”¡é£æ ¼PPT                              â”‚
â”‚  - ç§»åŠ¨åˆ°/mnt/user-data/outputs/                        â”‚
â”‚  - è¿”å›ä¸‹è½½é“¾æ¥                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ¨¡å—è®¾è®¡

#### æ¨¡å—1: æ•°æ®åŠ è½½æ¨¡å—ï¼ˆDataLoaderï¼‰

**èŒè´£**: ç»Ÿä¸€å¤„ç†å¤šç§æ•°æ®æ ¼å¼

**è¾“å…¥**: æ–‡ä»¶è·¯å¾„ + æ–‡ä»¶æ ¼å¼æ ‡è¯†
**è¾“å‡º**: pandas DataFrame

**æ”¯æŒæ ¼å¼**:
- Excel (.xlsx, .xls)
- CSV (.csv)
- JSON (.json)
- DuckDB (.db, .duckdb)

**å…³é”®é€»è¾‘**:
```python
def load_data(file_path: str) -> pd.DataFrame:
    """
    æ ¹æ®æ–‡ä»¶æ‰©å±•åè‡ªåŠ¨è¯†åˆ«æ ¼å¼å¹¶åŠ è½½
    
    å¿…éœ€å­—æ®µéªŒè¯ï¼š
    - æœºæ„, å®¢æˆ·ç±»åˆ«, ç­¾å•ä¿è´¹, æ»¡æœŸèµ”ä»˜ç‡
    - è´¹ç”¨ç‡, å˜åŠ¨æˆæœ¬ç‡, å·²æŠ¥å‘Šèµ”æ¬¾, å‡ºé™©ç‡, æ¡ˆå‡èµ”æ¬¾
    """
    # å®ç°é€»è¾‘...
```

#### æ¨¡å—2: ä¸šåŠ¡åˆ†ææ¨¡å—ï¼ˆAnalyzerï¼‰

**èŒè´£**: æ ¹æ®è½¦é™©ä¸šåŠ¡é€»è¾‘è®¡ç®—æŒ‡æ ‡å¹¶è¯†åˆ«é—®é¢˜

**æ ¸å¿ƒåŠŸèƒ½**:
1. **æŒ‡æ ‡è®¡ç®—**
   - å¹´ç´¯è®¡æŒ‡æ ‡æ±‡æ€»
   - å½“å‘¨å€¼æå–
   - ä¿è´¹è¾¾æˆç‡è®¡ç®—ï¼ˆéœ€plans.jsonï¼‰
   
2. **é—®é¢˜æœºæ„è¯†åˆ«**
   - åŸºäºthresholds.jsoné˜ˆå€¼åˆ¤æ–­
   - å¤šç»´åº¦äº¤å‰åˆ†æï¼ˆæˆæœ¬ç‡ Ã— ä¿è´¹ Ã— èµ”ä»˜ç‡ï¼‰
   - æŒ‰å½±å“ç¨‹åº¦æ’åº

3. **é—®é¢˜å¯¼å‘æ ‡é¢˜ç”Ÿæˆ**
   - æ¨¡æ¿: "{{æ•´ä½“è¯„ä»·}}ï¼Œ{{é—®é¢˜æœºæ„}}æœºæ„{{å…·ä½“é—®é¢˜}}"
   - ç¤ºä¾‹: "æœ¬å‘¨æˆæœ¬æ§åˆ¶è‰¯å¥½(85.3%)ï¼Œé«˜æ–°æœºæ„ä¿è´¹è¿›åº¦è½å"

#### æ¨¡å—3: æŠ¥å‘Šç”Ÿæˆæ¨¡å—ï¼ˆReportBuilderï¼‰

**èŒè´£**: ç”Ÿæˆç¬¦åˆéº¦è‚¯é”¡é£æ ¼çš„PPT

**è§†è§‰è§„èŒƒ**:
- é…è‰²: æ·±çº¢#a02724 + ç°åº¦ + çŠ¶æ€è‰²
- å­—ä½“: å¾®è½¯é›…é»‘Bold 24ptï¼ˆæ ‡é¢˜ï¼‰, Arial Bold 48ptï¼ˆæ•°å­—ï¼‰
- å¸ƒå±€: 16:9å®½å±ï¼Œå¤§é‡ç•™ç™½
- å›¾è¡¨: å››è±¡é™å›¾ã€æ°”æ³¡å›¾ï¼Œç›´æ¥æ ‡æ³¨æ•°å€¼

**é¡µé¢ç»“æ„**:
1. å°é¢
2. ç»è¥æ¦‚è§ˆï¼ˆ2é¡µï¼‰
3. ä¿è´¹è¿›åº¦åˆ†æï¼ˆ2é¡µï¼‰
4. å˜åŠ¨æˆæœ¬åˆ†æï¼ˆ2é¡µï¼‰
5. æŸå¤±æš´éœ²åˆ†æï¼ˆ4é¡µï¼‰
6. è´¹ç”¨æ”¯å‡ºåˆ†æï¼ˆ2é¡µï¼‰
7. ï¼ˆå¯é€‰ï¼‰è¶‹åŠ¿åˆ†æï¼ˆ1é¡µï¼‰

### 2.3 æ•°æ®æµè®¾è®¡

```
Step 1: æ•°æ®åŠ è½½
  ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ â†’ DataLoaderè¯†åˆ«æ ¼å¼ â†’ åŠ è½½ä¸ºDataFrame â†’ å­—æ®µéªŒè¯

Step 2: é…ç½®è¯»å–
  è¯»å–thresholds.json â†’ è¯»å–plans.jsonï¼ˆå¯é€‰ï¼‰ â†’ åŠ è½½é˜ˆå€¼è§„åˆ™

Step 3: ä¸šåŠ¡åˆ†æ
  è®¡ç®—å¹´ç´¯è®¡æŒ‡æ ‡ â†’ è¯†åˆ«é—®é¢˜æœºæ„ â†’ ç”Ÿæˆé—®é¢˜å¯¼å‘æ ‡é¢˜ â†’ å‡†å¤‡å›¾è¡¨æ•°æ®

Step 4: æŠ¥å‘Šç”Ÿæˆ
  åˆ›å»ºPPTå¯¹è±¡ â†’ æ·»åŠ å°é¢ â†’ é€é¡µç”Ÿæˆï¼ˆ12-13é¡µï¼‰â†’ ä¿å­˜æ–‡ä»¶

Step 5: è¾“å‡ºäº¤ä»˜
  ç§»åŠ¨åˆ°outputsç›®å½• â†’ è°ƒç”¨present_fileså·¥å…· â†’ è¿”å›ä¸‹è½½é“¾æ¥
```

## ä¸‰ã€å…³é”®æŠ€æœ¯å†³ç­–

### å†³ç­–1: PPTç”Ÿæˆåº“é€‰æ‹©

**@decision**: é€‰æ‹©python-pptxè€ŒéReportLabæˆ–pdfkit

**ç†ç”±**:
1. python-pptxæ”¯æŒç²¾ç¡®å¸ƒå±€æ§åˆ¶ï¼ˆæ»¡è¶³éº¦è‚¯é”¡é£æ ¼è¦æ±‚ï¼‰
2. åŸç”Ÿæ”¯æŒå›¾è¡¨åµŒå…¥ï¼ˆmatplotlib â†’ PPTï¼‰
3. ç¤¾åŒºæ´»è·ƒï¼Œæ–‡æ¡£å®Œå–„
4. ç”¨æˆ·æ›´ç†Ÿæ‚‰PPTæ ¼å¼ï¼ˆä¾¿äºåç»­æ‰‹åŠ¨è°ƒæ•´ï¼‰

**æƒè¡¡**:
- ä¼˜åŠ¿: çµæ´»æ€§é«˜ï¼Œç”¨æˆ·æ¥å—åº¦å¥½
- åŠ£åŠ¿: æ€§èƒ½ä¸å¦‚PDFç”Ÿæˆï¼Œå¤§æ–‡ä»¶ï¼ˆ>50é¡µï¼‰ä¼šå˜æ…¢
- å†³ç­–: è½¦é™©å‘¨æŠ¥å›ºå®š12-13é¡µï¼Œæ€§èƒ½å¯æ¥å—

### å†³ç­–2: æ•°æ®å¤„ç†æ–¹å¼

**@decision**: ä½¿ç”¨pandaså†…å­˜å¤„ç†è€Œéæµå¼å¤„ç†

**ç†ç”±**:
1. è½¦é™©å‘¨æŠ¥æ•°æ®é‡å°ï¼ˆé€šå¸¸<1ä¸‡è¡Œï¼‰
2. pandasæä¾›ä¸°å¯Œçš„åˆ†æå‡½æ•°ï¼ˆgroupby, pivot_tableï¼‰
3. ç®€åŒ–å¼€å‘å¤æ‚åº¦

**æƒè¡¡**:
- ä¼˜åŠ¿: å¼€å‘æ•ˆç‡é«˜ï¼Œä»£ç å¯è¯»æ€§å¥½
- åŠ£åŠ¿: å¤§æ•°æ®é‡ï¼ˆ>10ä¸‡è¡Œï¼‰æ€§èƒ½ä¸‹é™
- å†³ç­–: å¦‚æœªæ¥æ•°æ®é‡å¢é•¿ï¼Œå¯å¼•å…¥DuckDBä¼˜åŒ–

### å†³ç­–3: é…ç½®æ–‡ä»¶æ ¼å¼

**@decision**: ä½¿ç”¨JSONè€ŒéYAMLæˆ–Pythoné…ç½®

**ç†ç”±**:
1. JSONæ ¼å¼ç®€å•ï¼Œä¸šåŠ¡äººå‘˜å¯ç›´æ¥ç¼–è¾‘
2. PythonåŸç”Ÿæ”¯æŒï¼Œæ— éœ€é¢å¤–ä¾èµ–
3. ä¾¿äºå‰ç«¯å±•ç¤ºï¼ˆå¦‚æœæœªæ¥å¼€å‘Webç•Œé¢ï¼‰

**ç¤ºä¾‹**:
```json
{{
  "é—®é¢˜æœºæ„è¯†åˆ«é˜ˆå€¼": {{
    "å¹´ä¿è´¹æœªè¾¾æ ‡": 95,
    "å˜åŠ¨æˆæœ¬ç‡è¶…æ ‡": 95,
    "æ»¡æœŸèµ”ä»˜ç‡è¶…æ ‡": 75,
    "è´¹ç”¨ç‡è¶…æ ‡": 20
  }}
}}
```

### å†³ç­–4: ä»£ç æ¨¡å¼æå–æ–¹æ³•

**@decision**: ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è€ŒéASTè§£æ

**ç†ç”±**:
1. MVPé˜¶æ®µè¿½æ±‚ç®€å•å¿«é€Ÿå®ç°
2. æ­£åˆ™è¶³ä»¥è¯†åˆ«90%çš„å¸¸è§æ¨¡å¼ï¼ˆå‡½æ•°ç­¾åã€å†³ç­–æ³¨é‡Šï¼‰
3. é¿å…å¼•å…¥ast/lib2to3ç­‰å¤æ‚ä¾èµ–

**æå–è§„åˆ™**:
```python
# è¯†åˆ«æŠ€æœ¯å†³ç­–
pattern_decision = r'#\\s*@decision:\\s*(.+)'

# è¯†åˆ«å‡½æ•°å®šä¹‰
pattern_function = r'def\\s+(\\w+)\\s*\\(([^)]*)\\):'

# è¯†åˆ«é…ç½®æ–‡ä»¶ç»“æ„
pattern_config = r'"(\\w+)":\\s*(\\{{[^}}]+\\}}|\\[[^\\]]+\\]|[^,\\n]+)'
```

## å››ã€æŠ€æœ¯é£é™©ä¸åº”å¯¹

### 4.1 æ€§èƒ½é£é™©

**é£é™©**: æ•°æ®é‡è¶…è¿‡10ä¸‡è¡Œæ—¶pandaså¤„ç†å˜æ…¢

**æ¦‚ç‡**: ä¸­
**å½±å“**: ä¸­
**åº”å¯¹ç­–ç•¥**:
1. **çŸ­æœŸ**: é™åˆ¶å•æ¬¡å¤„ç†ä¸Šé™ä¸º5ä¸‡è¡Œï¼Œè¶…è¿‡åˆ™æç¤ºåˆ†æ‰¹
2. **ä¸­æœŸ**: å¼•å…¥DuckDBè¿›è¡Œé¢„èšåˆï¼Œpandasåªå¤„ç†æ±‡æ€»åæ•°æ®
3. **é•¿æœŸ**: å¦‚éœ€å¤„ç†æ›´å¤§æ•°æ®é‡ï¼Œè€ƒè™‘è¿ç§»åˆ°Spark

**ç›‘æ§æŒ‡æ ‡**: å¤„ç†æ—¶é—´è¶…è¿‡30ç§’è§¦å‘å‘Šè­¦

### 4.2 å…¼å®¹æ€§é£é™©

**é£é™©**: ä¸åŒæ¥æºçš„Excelæ–‡ä»¶å­—æ®µåä¸ä¸€è‡´

**æ¦‚ç‡**: é«˜
**å½±å“**: é«˜
**åº”å¯¹ç­–ç•¥**:
1. åœ¨DataLoaderä¸­å¢åŠ å­—æ®µæ˜ å°„é…ç½®
2. æ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼ˆå¦‚"æœºæ„"="æœºæ„åç§°"="ä¸‰çº§æœºæ„"ï¼‰
3. æä¾›å­—æ®µæ˜ å°„å‘å¯¼è„šæœ¬

**ç¤ºä¾‹é…ç½®**:
```json
{{
  "å­—æ®µæ˜ å°„": {{
    "æœºæ„": ["æœºæ„", "æœºæ„åç§°", "ä¸‰çº§æœºæ„", "org_name"],
    "ç­¾å•ä¿è´¹": ["ç­¾å•ä¿è´¹", "ä¿è´¹", "premium"]
  }}
}}
```

### 4.3 å¯ç»´æŠ¤æ€§é£é™©

**é£é™©**: ä»£ç é€»è¾‘åˆ†æ•£ï¼Œéš¾ä»¥å®šä½é—®é¢˜

**æ¦‚ç‡**: ä¸­
**å½±å“**: ä¸­
**åº”å¯¹ç­–ç•¥**:
1. ä¸¥æ ¼æ¨¡å—åŒ–è®¾è®¡ï¼ˆDataLoader/Analyzer/ReportBuilderç‹¬ç«‹ï¼‰
2. å…³é”®å‡½æ•°æ·»åŠ è¯¦ç»†docstring
3. ä½¿ç”¨loggingè®°å½•å…³é”®æ­¥éª¤

**ä»£ç è§„èŒƒ**:
```python
import logging

logger = logging.getLogger(__name__)

def analyze_cost_rate(df: pd.DataFrame, thresholds: dict) -> dict:
    """
    åˆ†æå˜åŠ¨æˆæœ¬ç‡å¹¶è¯†åˆ«é—®é¢˜æœºæ„
    
    Args:
        df: åŒ…å«æˆæœ¬ç‡æ•°æ®çš„DataFrame
        thresholds: é˜ˆå€¼é…ç½®å­—å…¸
        
    Returns:
        dict: {{
            'overall_status': 'good',  # good/warning/critical
            'problem_orgs': ['é«˜æ–°æœºæ„', 'æˆåæœºæ„'],
            'avg_cost_rate': 85.3
        }}
    """
    logger.info(f"å¼€å§‹åˆ†ææˆæœ¬ç‡ï¼Œæ•°æ®è¡Œæ•°: {{len(df)}}")
    # åˆ†æé€»è¾‘...
```

## äº”ã€å¯æ‰©å±•æ€§è®¾è®¡

### 5.1 æ’ä»¶åŒ–å›¾è¡¨ç”Ÿæˆ

**è®¾è®¡æ€è·¯**: å°†å›¾è¡¨ç”Ÿæˆé€»è¾‘æŠ½è±¡ä¸ºç‹¬ç«‹å‡½æ•°ï¼Œä¾¿äºæ–°å¢å›¾è¡¨ç±»å‹

```python
# å›¾è¡¨ç”Ÿæˆå™¨æ³¨å†Œæœºåˆ¶
CHART_GENERATORS = {{
    'quadrant': generate_quadrant_chart,
    'bubble': generate_bubble_chart,
    'trend': generate_trend_chart
}}

def add_chart_to_slide(slide, chart_type, data, **kwargs):
    """åŠ¨æ€è°ƒç”¨å¯¹åº”çš„å›¾è¡¨ç”Ÿæˆå‡½æ•°"""
    generator = CHART_GENERATORS.get(chart_type)
    if generator:
        return generator(slide, data, **kwargs)
```

### 5.2 æ¨¡æ¿å¯é…ç½®åŒ–

**è®¾è®¡æ€è·¯**: å°†æŠ¥å‘Šç»“æ„å®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰é¡µé¢é¡ºåº

```json
{{
  "æŠ¥å‘Šç»“æ„": [
    {{"type": "cover", "enabled": true}},
    {{"type": "overview", "pages": 2, "enabled": true}},
    {{"type": "premium", "pages": 2, "enabled": true}},
    {{"type": "cost", "pages": 2, "enabled": true}},
    {{"type": "loss", "pages": 4, "enabled": true}},
    {{"type": "expense", "pages": 2, "enabled": true}},
    {{"type": "trend", "pages": 1, "enabled": false}}
  ]
}}
```

### 5.3 å¤šé¡¹ç›®æ”¯æŒ

**è®¾è®¡æ€è·¯**: çŸ¥è¯†åº“ç»“æ„æ”¯æŒå¤šé¡¹ç›®ç®¡ç†

```
knowledge-base/
â”œâ”€â”€ project-A/
â”‚   â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ decisions/
â”‚   â””â”€â”€ patterns/
â”œâ”€â”€ project-B/
â”‚   â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ decisions/
â”‚   â””â”€â”€ patterns/
â””â”€â”€ shared/
    â”œâ”€â”€ templates/
    â””â”€â”€ references/
```

## å…­ã€æµ‹è¯•ç­–ç•¥

### 6.1 å•å…ƒæµ‹è¯•

**è¦†ç›–æ¨¡å—**:
- DataLoader: æµ‹è¯•å„ç§æ•°æ®æ ¼å¼åŠ è½½
- Analyzer: æµ‹è¯•æŒ‡æ ‡è®¡ç®—é€»è¾‘
- ReportBuilder: æµ‹è¯•PPTç”Ÿæˆï¼ˆmockæ£€æŸ¥ï¼‰

**æµ‹è¯•æ¡†æ¶**: pytest

**ç›®æ ‡è¦†ç›–ç‡**: >80%

### 6.2 é›†æˆæµ‹è¯•

**æµ‹è¯•åœºæ™¯**:
1. ç«¯åˆ°ç«¯ï¼šä¸Šä¼ Excel â†’ ç”ŸæˆPPT â†’ éªŒè¯è¾“å‡º
2. è¾¹ç•Œæ¡ä»¶ï¼šç©ºæ•°æ®ã€è¶…å¤§æ•°æ®ã€å¼‚å¸¸æ ¼å¼
3. é…ç½®æµ‹è¯•ï¼šç¼ºå°‘plans.jsonã€é”™è¯¯çš„é˜ˆå€¼é…ç½®

### 6.3 æ€§èƒ½æµ‹è¯•

**æµ‹è¯•æŒ‡æ ‡**:
- 1000è¡Œæ•°æ®å¤„ç†æ—¶é—´ < 10ç§’
- 10000è¡Œæ•°æ®å¤„ç†æ—¶é—´ < 60ç§’
- å†…å­˜å ç”¨ < 500MB

## ä¸ƒã€éƒ¨ç½²æ–¹æ¡ˆ

### 7.1 æ‰“åŒ…æ–¹å¼

**æ–¹æ¡ˆ**: æ‰“åŒ…ä¸º.skillæ–‡ä»¶

**åŒ…å«å†…å®¹**:
- SKILL.md
- scripts/ï¼ˆ3ä¸ªPythonè„šæœ¬ï¼‰
- templates/ï¼ˆ2ä¸ªMarkdownæ¨¡æ¿ï¼‰
- references/ï¼ˆ1ä¸ªé¢†åŸŸçŸ¥è¯†æ–‡æ¡£ï¼‰

**å®‰è£…æ–¹å¼**:
ç”¨æˆ·åœ¨Claude.aiä¸­ä¸Šä¼ .skillæ–‡ä»¶ï¼Œè‡ªåŠ¨å®‰è£…åˆ°Skillsåº“

### 7.2 ä¾èµ–ç®¡ç†

**requirements.txt**:
```
pandas>=1.5.0
python-pptx>=0.6.21
matplotlib>=3.5.0
openpyxl>=3.0.0
duckdb>=0.9.0  # å¯é€‰
```

**å®‰è£…å‘½ä»¤**:
```bash
pip install -r requirements.txt --break-system-packages
```

## å…«ã€ç›‘æ§ä¸ç»´æŠ¤

### 8.1 æ—¥å¿—è®°å½•

**æ—¥å¿—çº§åˆ«**:
- INFO: æ­£å¸¸æµç¨‹ï¼ˆæ•°æ®åŠ è½½ã€åˆ†æã€ç”Ÿæˆï¼‰
- WARNING: é…ç½®ç¼ºå¤±ã€æ•°æ®å¼‚å¸¸ï¼ˆå¯ç»§ç»­ï¼‰
- ERROR: è‡´å‘½é”™è¯¯ï¼ˆä¸­æ–­æ‰§è¡Œï¼‰

**æ—¥å¿—ç¤ºä¾‹**:
```
[INFO] 2025-12-10 10:30:00 - å¼€å§‹å¤„ç†æ•°æ®æ–‡ä»¶: data.xlsx
[INFO] 2025-12-10 10:30:02 - æ•°æ®åŠ è½½å®Œæˆï¼Œå…±1523è¡Œ
[WARNING] 2025-12-10 10:30:03 - æœªæ‰¾åˆ°plans.jsonï¼Œè·³è¿‡ä¿è´¹è¾¾æˆç‡è®¡ç®—
[INFO] 2025-12-10 10:30:15 - æŠ¥å‘Šç”Ÿæˆå®Œæˆ: output/report.pptx
```

### 8.2 é”™è¯¯å¤„ç†

**åˆ†çº§å¤„ç†**:
1. **å¯æ¢å¤é”™è¯¯**: è®°å½•è­¦å‘Šï¼Œä½¿ç”¨é»˜è®¤å€¼ç»§ç»­
   - ç¤ºä¾‹: ç¼ºå°‘plans.json â†’ è·³è¿‡ä¿è´¹è¿›åº¦é¡µ
   
2. **ä¸å¯æ¢å¤é”™è¯¯**: ä¸­æ–­æ‰§è¡Œï¼Œè¿”å›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯
   - ç¤ºä¾‹: ç¼ºå°‘å¿…éœ€å­—æ®µ â†’ åˆ—å‡ºç¼ºå¤±å­—æ®µï¼Œæç¤ºä¿®æ­£

**ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯**:
```
âŒ æ•°æ®éªŒè¯å¤±è´¥

ç¼ºå°‘ä»¥ä¸‹å¿…éœ€å­—æ®µï¼š
- ç­¾å•ä¿è´¹ (premium)
- æ»¡æœŸèµ”ä»˜ç‡ (loss_ratio)

è¯·æ£€æŸ¥æ•°æ®æ–‡ä»¶å¹¶ç¡®ä¿åŒ…å«è¿™äº›å­—æ®µã€‚
```

---

**æŠ€æœ¯æ–¹æ¡ˆç‰ˆæœ¬**: v1.0.0
**è¯„å®¡çŠ¶æ€**: å¾…è¯„å®¡
**ä¸‹æ¬¡è¯„å®¡æ—¥æœŸ**: {datetime.now().strftime("%Y-%m-%d")}
'''
    
    with open(output_path, 'w', encoding='utf-8') as f:
        f.write(template)
    
    return output_path

def generate_readme(base_path: str, project_name: str = "æ–°é¡¹ç›®") -> str:
    """ç”ŸæˆçŸ¥è¯†åº“README.mdç´¢å¼•æ–‡ä»¶"""
    
    readme = f'''# {project_name} çŸ¥è¯†åº“

> è‡ªåŠ¨ç”Ÿæˆäº {datetime.now().strftime("%Y-%m-%d %H:%M:%S")}

## ğŸ“ ç›®å½•ç»“æ„

```
{os.path.basename(base_path)}/
â”œâ”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ é¡¹ç›®å¯åŠ¨æ–‡æ¡£.md
â”‚   â””â”€â”€ æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£.md
â”œâ”€â”€ decisions/             # æŠ€æœ¯å†³ç­–è®°å½•
â”‚   â””â”€â”€ (è‡ªåŠ¨æå–çš„@decision)
â”œâ”€â”€ patterns/              # å¯å¤ç”¨æ¨¡å¼
â”‚   â”œâ”€â”€ code/             # ä»£ç æ¨¡å¼
â”‚   â””â”€â”€ configs/          # é…ç½®æ¨¡æ¿
â””â”€â”€ reports/              # åˆ†ææŠ¥å‘Š
    â””â”€â”€ (é¡¹ç›®å¤ç›˜ã€ç»éªŒæ€»ç»“)
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æŸ¥çœ‹é¡¹ç›®å¯åŠ¨æ–‡æ¡£
```bash
cat docs/é¡¹ç›®å¯åŠ¨æ–‡æ¡£.md
```

### 2. æŸ¥çœ‹æŠ€æœ¯æ–¹æ¡ˆ
```bash
cat docs/æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£.md
```

### 3. æå–ç°æœ‰é¡¹ç›®çš„çŸ¥è¯†æ¨¡å¼
```bash
# ä½¿ç”¨extract_patterns.pyè„šæœ¬æå–
# è¯¦è§ Claude Skill: project-knowledge-base
```

## ğŸ“‹ æ–‡æ¡£ç´¢å¼•

### é¡¹ç›®æ–‡æ¡£
- [é¡¹ç›®å¯åŠ¨æ–‡æ¡£](docs/é¡¹ç›®å¯åŠ¨æ–‡æ¡£.md) - é¡¹ç›®èƒŒæ™¯ã€ç›®æ ‡ã€é‡Œç¨‹ç¢‘
- [æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£](docs/æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£.md) - æ¶æ„è®¾è®¡ã€æŠ€æœ¯é€‰å‹ã€é£é™©åˆ†æ

### æŠ€æœ¯å†³ç­–ï¼ˆå¾…æå–ï¼‰
<!-- è¿è¡Œextract_patterns.pyåè‡ªåŠ¨ç”Ÿæˆ -->

### ä»£ç æ¨¡å¼ï¼ˆå¾…æå–ï¼‰
<!-- è¿è¡Œextract_patterns.pyåè‡ªåŠ¨ç”Ÿæˆ -->

## ğŸ·ï¸ æ ‡ç­¾ç´¢å¼•

- `#è½¦é™©ä¸šåŠ¡` - åå®‰ä¿é™©è½¦é™©ç›¸å…³é¡¹ç›®
- `#æ•°æ®åˆ†æ` - æ•°æ®å¤„ç†ä¸åˆ†æé¡¹ç›®
- `#è‡ªåŠ¨åŒ–` - è‡ªåŠ¨åŒ–å·¥å…·å¼€å‘
- `#PPTç”Ÿæˆ` - æŠ¥å‘Šè‡ªåŠ¨ç”Ÿæˆ

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

- æ–‡æ¡£æ€»æ•°: 2
- æŠ€æœ¯å†³ç­–: 0ï¼ˆå¾…æå–ï¼‰
- ä»£ç æ¨¡å¼: 0ï¼ˆå¾…æå–ï¼‰
- æœ€åæ›´æ–°: {datetime.now().strftime("%Y-%m-%d")}

---

**ä½¿ç”¨è¯´æ˜**: æœ¬çŸ¥è¯†åº“ç”± `project-knowledge-base` Skill è‡ªåŠ¨ç”Ÿæˆå’Œç®¡ç†ã€‚
'''
    
    readme_path = os.path.join(base_path, 'README.md')
    with open(readme_path, 'w', encoding='utf-8') as f:
        f.write(readme)
    
    return readme_path

def main():
    if len(sys.argv) < 2:
        print("ç”¨æ³•: python init_project_kb.py <é¡¹ç›®åç§°> [çŸ¥è¯†åº“è·¯å¾„]")
        print("ç¤ºä¾‹: python init_project_kb.py è½¦é™©å‘¨æŠ¥è‡ªåŠ¨åŒ– /home/claude/kb")
        sys.exit(1)
    
    project_name = sys.argv[1]
    kb_path = sys.argv[2] if len(sys.argv) > 2 else os.path.join(os.getcwd(), 'knowledge-base')
    
    print(f"ğŸš€ å¼€å§‹åˆå§‹åŒ–é¡¹ç›®çŸ¥è¯†åº“: {project_name}")
    print(f"ğŸ“ çŸ¥è¯†åº“è·¯å¾„: {kb_path}\n")
    
    # åˆ›å»ºç›®å½•ç»“æ„
    print("1ï¸âƒ£ åˆ›å»ºç›®å½•ç»“æ„...")
    dirs = create_directory_structure(kb_path)
    for name, path in dirs.items():
        print(f"  âœ… {name}: {path}")
    
    # ç”Ÿæˆæ¨¡æ¿
    print("\n2ï¸âƒ£ ç”Ÿæˆé¡¹ç›®æ–‡æ¡£æ¨¡æ¿...")
    
    docs_dir = os.path.join(kb_path, 'docs')
    charter_path = os.path.join(docs_dir, 'é¡¹ç›®å¯åŠ¨æ–‡æ¡£.md')
    tech_path = os.path.join(docs_dir, 'æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£.md')
    
    generate_project_charter_template(charter_path, project_name)
    print(f"  âœ… é¡¹ç›®å¯åŠ¨æ–‡æ¡£: {charter_path}")
    
    generate_tech_design_template(tech_path, project_name)
    print(f"  âœ… æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£: {tech_path}")
    
    # ç”ŸæˆREADME
    print("\n3ï¸âƒ£ ç”ŸæˆREADMEç´¢å¼•...")
    readme_path = generate_readme(kb_path, project_name)
    print(f"  âœ… README: {readme_path}")
    
    print("\nâœ¨ åˆå§‹åŒ–å®Œæˆ!")
    print(f"\nğŸ“– ä¸‹ä¸€æ­¥:")
    print(f"  1. ç¼–è¾‘é¡¹ç›®å¯åŠ¨æ–‡æ¡£: {charter_path}")
    print(f"  2. ç¼–è¾‘æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£: {tech_path}")
    print(f"  3. è¿è¡Œ extract_patterns.py æå–ç°æœ‰é¡¹ç›®çš„çŸ¥è¯†æ¨¡å¼")
    
    return 0

if __name__ == '__main__':
    sys.exit(main())
