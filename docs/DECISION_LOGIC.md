# 决策框架

本文件给出创建与选择技能/架构的决策逻辑，确保每次选择都有清晰理由与质量标准。

## 模板选择逻辑

- **固定格式输出**：优先选择基于模板的简单技能，减少模型自由发挥。
- **需要多步推理或外部调用**：选择复杂技能套件，并在计划中明确每步依赖。
- **高风险/高价值场景**：启用双通道（模型推理 + 规则校验）以降低错误率。

## API 选择准则

- 优先使用已验证的内部 API；外部 API 需通过稳定性与安全性评估。
- 对有速率限制的 API，需要在技能中加入并发控制与退避策略。
- 对涉及敏感数据的 API，强制记录审计日志并进行脱敏处理。

## 架构选择理由

- 当需求明确、路径固定时，使用简单技能提升响应速度。
- 当需求包含多条件、多分支时，使用可编排的套件以便灵活调整。
- 若需要跨任务共享状态，选择支持持久化的技能套件，并设计幂等接口。

## 质量指标

- **准确率**：回答与预期的一致程度，重点关注是否正确引用记忆与技能输出。
- **稳定性**：在相同输入下结果一致，重试对结果影响可控。
- **可观测性**：是否有完整的 trace/log/metrics；出现异常时能快速定位。
- **可维护性**：配置与代码分层清晰，技能命名规范，测试覆盖充分。
