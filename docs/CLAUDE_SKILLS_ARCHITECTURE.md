# Claude Skills 架构指南

本指南阐述 Claude Skills 的核心架构选择，帮助你在简单技能与复杂技能套件之间做出正确决策。

## 架构总览

- **简单技能**：单一功能、输入输出明确，适合计算、格式化、快捷查询等轻量场景。
- **复杂技能套件**：由多个子技能组成，包含编排、错误恢复与共享上下文，适用于流程化任务。

## 何时选择简单技能

- 需求单一、可在一次调用内完成。
- 失败代价低、无需重试或补偿逻辑。
- 输入输出均为结构化数据，便于直接呈现。

## 何时选择复杂技能套件

- 需要多步 API 调用或与外部系统交互。
- 存在条件分支或循环，需基于上下文动态决策。
- 要求可观测性与审计（记录每步操作与中间态）。

## 架构决策流程

1. 明确业务目标与成功标准。
2. 判断是否需要持久化中间状态。
3. 评估失败代价与重试策略。
4. 根据复杂度选择简单技能或套件。
5. 设计输入输出契约与日志字段，确保可测试可追踪。

## 组件组织方式

- **入口模块**：解析调用请求，进行参数校验。
- **执行器**：承载核心逻辑，可选择顺序、并行或条件分支执行。
- **存储/记忆**：写入关键状态，便于后续检索与因果追溯。
- **观测层**：统一输出 trace_id、耗时、命中情况等指标。

## 最佳实践

- 将业务逻辑与提示词配置解耦，便于热更新。
- 优先使用声明式配置描述数据流，再为特殊分支编写代码。
- 为每个技能设计最小可复现示例，方便回归测试。
