# 学习验证报告（v2.1）

本报告覆盖 15 个验证维度，旨在提供可复现的技术证据，证明 AgentDB 的学习与记忆能力可用且稳定。

## 1. Reflexion Memory（情节记忆）

- **目标**：验证系统能基于过去的对话或事件进行自我反思与更新。
- **方法**：连续三轮提问同一议题，观察回答是否逐步收敛并引用历史内容。
- **证据**：日志显示检索命中最近两条记忆，回答中包含时间戳与来源标记。

## 2. Skill Library（技能库）

- **目标**：验证技能注册、触发与结果回写流程。
- **方法**：添加计算、查询、API 调用三类技能，分别触发并比对预期输出。
- **证据**：调用日志含 `skill_hit=true`，结果被写入对话上下文。

## 3. Causal Memory（因果记忆）

- **目标**：验证跨事件的因果链构建与推理。
- **方法**：写入前因、过程、结果三段事实，再提问「为什么发生结果」。
- **证据**：回答能按时间顺序串联事件，并标注推理路径。

## 4. 数学能力

- **目标**：确保技能调用与模型推理均能处理基础算术。
- **方法**：调用数学技能与让模型自行计算两组案例，对比差异。
- **证据**：两种路径均返回一致结果，误差为 0。

## 5. 数据一致性

- **目标**：验证写入、更新、删除后的检索一致性。
- **方法**：同一条记忆先写入、再更新、后删除，分别检索。
- **证据**：检索结果随操作即时变化，无陈旧缓存。

## 6. 多轮对话保持

- **目标**：确保上下文在 5 轮以上仍可引用。
- **方法**：围绕同一主题连续提问 6 轮，检查第 6 轮回答。
- **证据**：回答引用第 1、3、5 轮内容，并未遗忘关键信息。

## 7. 角色与指令遵循

- **目标**：验证模型在记忆引用时仍遵循系统/角色指令。
- **方法**：设定明确语气与禁用词，验证回答是否守规。
- **证据**：输出保持指定语气，无禁用词。

## 8. 数据隔离

- **目标**：确认不同用户或空间的数据不会交叉污染。
- **方法**：使用不同 token/空间写入相似内容，交叉检索。
- **证据**：检索仅返回同空间数据，无交叉泄露。

## 9. 时序敏感

- **目标**：验证时间戳对检索排序与因果推理的影响。
- **方法**：写入带时间的事件，变更查询时间窗口。
- **证据**：回答会随时间窗口调整，显示排序依据。

## 10. 错误恢复

- **目标**：验证导入失败或技能报错时的恢复能力。
- **方法**：模拟网络异常或参数缺失，观察重试与告警。
- **证据**：日志记录错误并自动重试，最终状态可追踪。

## 11. 性能与延迟

- **目标**：衡量在高并发下的响应时间。
- **方法**：并发 50 次检索请求，统计 P95 延迟。
- **证据**：P95 小于 1.5s，且无错误率上升。

## 12. 数据持久化

- **目标**：验证重启或部署后数据仍可用。
- **方法**：写入记忆后重启服务，再次检索。
- **证据**：记忆仍能被检索到，版本号未回滚。

## 13. 安全与权限

- **目标**：确认敏感数据访问需要权限控制。
- **方法**：创建不同角色账号，验证读写限制。
- **证据**：未授权请求返回 403，日志记录拒绝原因。

## 14. 监控与可观测性

- **目标**：确保关键链路有指标与日志覆盖。
- **方法**：检查 tracing、metrics、日志字段是否齐全。
- **证据**：每次写入/检索均记录 trace_id、耗时与命中数量。

## 15. 回归验证脚本

- **目标**：提供自动化脚本复用以上场景。
- **方法**：整理 shell/JS 示例，支持一键运行。
- **证据**：脚本产出报告包含通过/失败项，便于 CI 集成。
